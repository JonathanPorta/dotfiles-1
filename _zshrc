#
# reminder: to update antigen: run `antigen selfupdate` and commit any changes
# to update plugins run `antigen update`
#
source ~/.dotfiles/antigen.zsh

# load modules supplied by oh-my-zsh project
antigen use oh-my-zsh
antigen bundle git
# antigen bundle chruby      # DISABLED: slows startup down. disabled. https://github.com/robbyrussell/oh-my-zsh/wiki/Plugins#chruby
antigen bundle web-search  # adds commands google|bing|ddg https://github.com/robbyrussell/oh-my-zsh/wiki/Plugins#web-search
# antigen bundle vagrant     # DISABLED: slows startup down.
antigen bundle systemd     # https://github.com/robbyrussell/oh-my-zsh/wiki/Plugins#systemd
# antigen bundle bundler     # https://github.com/robbyrussell/oh-my-zsh/wiki/Plugins#bundler
# antigen bundle composer    # https://github.com/robbyrussell/oh-my-zsh/wiki/Plugins#composer
antigen bundle docker      # https://github.com/robbyrussell/oh-my-zsh/wiki/Plugins#docker
antigen bundle fabric      # https://github.com/robbyrussell/oh-my-zsh/wiki/Plugins#fabric
antigen bundle encode64    # adds commands encode64|decode64 (https://github.com/robbyrussell/oh-my-zsh/wiki/Plugins#encode64)
# antigen bundle per-directory-history # ctrl-G to toggle global | per-dir history
antigen bundle sudo        # ESC twice: Puts sudo in front of the current command, or the last one if the command line is empty.
antigen bundle urltools    # adds commands urlencode | urldecode
#antigen bundle kubectl     # kubectl completions

# load non-omz modules
antigen bundle zsh-users/zsh-syntax-highlighting
antigen bundle zsh-users/zsh-autosuggestions
antigen bundle zsh-users/zsh-completions src
antigen bundle djui/alias-tips

# configure zsh-autosuggestions
export ZSH_AUTOSUGGEST_BUFFER_MAX_SIZE=80
# allow ctrl + [space] to accept autosuggestions in addition to the default right-arrow-key
bindkey '^ ' autosuggest-accept


if [[ "$OSTYPE" =~ darwin ]]; then
  antigen bundle osx
fi

for rc in "$HOME/.common.sh.d"/*; do
    source "$rc"
done

for rc in "$HOME/.zsh.d"/*; do
    source "$rc"
done

unsetopt share_history

antigen apply

export PATH=$PATH:/usr/local/sbin

# path to completions
fpath=(/usr/local/share/zsh/site-functions $fpath)

# aws uses a bash style completer
[ -f "/usr/local/share/zsh/site-functions/_aws" ] && source /usr/local/share/zsh/site-functions/_aws

# disable iterm2 3.x beta shell integration, it appears to be breaking with chruby (zsh hangs when trying to print prompt) - joe 2/29/2016
#test -e "${HOME}/.iterm2_shell_integration.zsh" && source "${HOME}/.iterm2_shell_integration.zsh"
set -o vi
